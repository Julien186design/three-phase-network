def extraire_coordonnees_infos(segments):
    # Extraire toutes les coordonnées x et y
    x_coords = [point[0] for segment in segments for point in segment]
    y_coords = [point[1] for segment in segments for point in segment]

    # Trouver les min/max pour les y
    y_min = min(y_coords)
    y_max = max(y_coords)

    return x_coords, y_min, y_max

def phases(draw, generator_terminals, terminals_offset, component_color, width):
    x_vals, y_p1, y_p2 = extraire_coordonnees_infos(generator_terminals)
    x_uniques = sorted(set(x_vals))
    y_p3 = y_p2 + 100

    phase_coordinates = [
        [(x_uniques[3], y_p1), (x_uniques[3] + terminals_offset, y_p1)],
        [(x_uniques[6], y_p2), (x_uniques[0] + terminals_offset, y_p2)],
        [(x_uniques[0], y_p2), (x_uniques[0], y_p3)],
        [(x_uniques[0], y_p3), (x_uniques[6] + terminals_offset, y_p3)],
        [(x_uniques[6] + terminals_offset, y_p3), (x_uniques[6] + terminals_offset, y_p2)]
    ]

    # Points de la polyligne unique
    polyline_points = [
        (x_uniques[0], y_p2),
        (x_uniques[0], y_p3),
        (x_uniques[6] + terminals_offset, y_p3),
        (x_uniques[6] + terminals_offset, y_p2)
    ]

    # Pour les autres lignes, on trace individuellement
    for i in range(2):  # index 0 et 1 forment d'autres segments à tracer individuellement
        color = component_color[i]
        draw.line(phase_coordinates[i], fill=color, width=width)

    # Tracer la polyligne gris pour les 3 dernières lignes en une seule fois
    draw.line(polyline_points, fill='grey', width=width)


