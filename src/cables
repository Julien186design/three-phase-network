def extraire_coordonnees_infos(segments):
    # Extraire toutes les coordonnées x et y
    x_coords = [point[0] for segment in segments for point in segment]
    y_coords = [point[1] for segment in segments for point in segment]

    return x_coords, y_coords

def phases_and_neutral(draw, generator_terminals, terminals_offset, neutral_offset, component_color, width):
    x_vals, y_vals = extraire_coordonnees_infos(generator_terminals)

    x_vals = sorted(set(x_vals))
    y_vals = sorted(set(y_vals))
    third_phase_down = y_vals[-1] + 100

    phase_coordinates = [
        [(x_vals[3], y_vals[0]), (x_vals[3] + terminals_offset, y_vals[0])], #1st phase
        [(x_vals[6], y_vals[-1]), (x_vals[0] + terminals_offset, y_vals[-1])] #2nd phase
    ]

    third_phase = [
        (x_vals[0], y_vals[-1]),
        (x_vals[0], third_phase_down),
        (x_vals[6] + terminals_offset, third_phase_down),
        (x_vals[6] + terminals_offset, y_vals[-1])
    ]

    neutral = [
        (x_vals[3], y_vals[3]),
        (x_vals[0] - neutral_offset, y_vals[3]),
        (x_vals[0] - neutral_offset, third_phase_down + neutral_offset),
        (x_vals[6] + neutral_offset + terminals_offset, third_phase_down + neutral_offset),
        (x_vals[6] + neutral_offset + terminals_offset, y_vals[3]),
        (x_vals[3] + terminals_offset, y_vals[3])
    ]

    # Pour les autres lignes, on trace individuellement
    for i in range(2):  # index 0 et 1 forment d'autres segments à tracer individuellement
        color = component_color[i]
        draw.line(phase_coordinates[i], fill=color, width=width)

    # Tracer la polyligne gris pour les 3 dernières lignes en une seule fois
    draw.line(third_phase, fill='grey', width=width)
    draw.line(neutral, fill='blue', width=width)


    print(f"\nphase_coordinates{phase_coordinates}")
    print(f"third_phase{third_phase}")


