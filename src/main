from background import basics, star_component_terminals
from generator import three_phase_generator
from loads import resistors
from cables import phases_and_neutral


if __name__ == '__main__':

    img, draw, height, font_small, component_color, text_color, picture_width = basics()

    config = {
        'width': 10,
        'filename': "three-phase network.png",
        'length_of_terminals': 80,
        'diameter': 80,
        'equipment_location': 5,
        'width_of_loads': 50,
        'neutral_offset' : 100
    }

    x_position_generator = picture_width // config['equipment_location']
    x_pos_loads = x_position_generator * (config['equipment_location'] - 1)
    terminals_offset = x_position_generator * (config['equipment_location'] - 2)


    len_terms, xg_phases_2_3, vertical_position_of_terminals, xgn = three_phase_generator(
        draw, height, config['width'], x_position_generator, component_color,
        length_of_terminals=config['length_of_terminals'],
        diameter=config['diameter']
    )

    xln, xl_phases2_3, generator_terminals, loads_terminals = star_component_terminals(
        x_position_generator, x_pos_loads, vertical_position_of_terminals, config['length_of_terminals'],
        xgn, config['diameter'], xg_phases_2_3, draw, component_color, config['width'], terminals_offset)


    resistors(
        draw, x_pos_loads, config['diameter'], xl_phases2_3, config['length_of_terminals'],
        xln, vertical_position_of_terminals, component_color, config['width'], width_of_loads=config['width_of_loads']
    )

    phases_and_neutral(draw, generator_terminals, terminals_offset,
                       config['neutral_offset'], component_color, config['width'])
    img.save(config['filename'])
